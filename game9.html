<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual Focus | NTSGROW</title>
    <style>
        :root {
            --primary: #00d4ff;
            --dark: #0a0a0a;
            --light: #ffffff;
            --danger: #ff4757;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .home-nav { position: absolute; top: 20px; left: 20px; }
        .btn-home {
            text-decoration: none; color: white; border: 1px solid #333;
            padding: 8px 15px; border-radius: 5px; font-size: 0.8rem;
        }

        h1 { color: var(--primary); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 3px; }
        .score-board { font-size: 1.5rem; margin-bottom: 20px; }

        /* Game Split Screen */
        .game-area {
            display: flex;
            width: 90%;
            max-width: 600px;
            height: 300px;
            gap: 10px;
        }

        .panel {
            flex: 1;
            background: #1a1a1a;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #333;
        }

        .shape {
            width: 80px;
            height: 80px;
            transition: 0.1s;
        }

        /* Controls */
        .controls {
            margin-top: 40px;
            display: flex;
            gap: 20px;
        }

        .action-btn {
            padding: 20px 50px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-diff { background: var(--danger); color: white; }
        .btn-same { background: #2ed573; color: white; }
        .action-btn:active { transform: scale(0.9); }

        #timer-bar {
            width: 90%;
            max-width: 600px;
            height: 5px;
            background: #333;
            margin-top: 20px;
        }
        #progress { width: 100%; height: 100%; background: var(--primary); }
    </style>
</head>
<body onclick="startMusic()">

    <nav class="home-nav">
        <a href="index.html" class="btn-home">‚Üê NTSGROW HOME</a>
    </nav>

    <audio id="bgMusic" loop>
        <source src="game9music.mp3" type="audio/mpeg">
    </audio>

    <h1>Dual Focus</h1>
    <div class="score-board">Score: <span id="score">0</span></div>

    <div class="game-area">
        <div class="panel" id="leftPanel"></div>
        <div class="panel" id="rightPanel"></div>
    </div>

    <div id="timer-bar"><div id="progress"></div></div>

    <div class="controls">
        <button class="action-btn btn-diff" onclick="checkResponse(false)">DIFFERENT</button>
        <button class="action-btn btn-same" onclick="checkResponse(true)">SAME</button>
    </div>

    <script>
        const leftPanel = document.getElementById('leftPanel');
        const rightPanel = document.getElementById('rightPanel');
        const bgMusic = document.getElementById('bgMusic');
        let score = 0;
        let isSame = false;
        let gameActive = false;
        let musicStarted = false;
        let timeLeft = 100;
        let timerInterval;

        const shapes = [
            '<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="white"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="20" y="20" width="60" height="60" fill="white"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="50,15 90,85 10,85" fill="white"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="10" y="40" width="80" height="20" fill="white"/></svg>'
        ];

        function startMusic() {
            if(!musicStarted) { bgMusic.play().catch(()=>{}); musicStarted = true; startGame(); }
        }

        function startGame() {
            score = 0;
            document.getElementById('score').innerText = score;
            gameActive = true;
            newRound();
            startTimer();
        }

        function newRound() {
            const idx1 = Math.floor(Math.random() * shapes.length);
            const idx2 = Math.random() > 0.5 ? idx1 : Math.floor(Math.random() * shapes.length);
            
            isSame = (idx1 === idx2);
            
            leftPanel.innerHTML = `<div class="shape">${shapes[idx1]}</div>`;
            rightPanel.innerHTML = `<div class="shape">${shapes[idx2]}</div>`;
            
            timeLeft = 100; // Reset timer for each round
        }

        function checkResponse(userAns) {
            if(!gameActive) return;
            
            if(userAns === isSame) {
                score++;
                document.getElementById('score').innerText = score;
                newRound();
            } else {
                gameOver();
            }
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft -= (1 + score * 0.05); // Speed increases with score
                document.getElementById('progress').style.width = timeLeft + "%";
                if(timeLeft <= 0) gameOver();
            }, 50);
        }

        function gameOver() {
            gameActive = false;
            clearInterval(timerInterval);
            alert("Mind Overload! Final Score: " + score);
            location.reload();
        }
    </script>
</body>
</html>